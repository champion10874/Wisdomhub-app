{"version":3,"file":"logger.js","names":["_winston","_interopRequireDefault","require","_winstonElasticsearch","obj","__esModule","default","esTransformer","logData","ElasticsearchTransformer","winstonLogger","elasticsearchNode","name","level","options","console","handleExceptions","json","colorize","elasticsearch","transformer","clientOpts","node","log","maxRetries","requestTimeout","sniffOnStart","esTransport","ElasticsearchTransport","logger","winston","createLogger","exitOnError","defaultMeta","service","transports","Console","exports"],"sources":["../../src/logger.ts"],"sourcesContent":["import winston, { Logger } from 'winston';\nimport { ElasticsearchTransport, ElasticsearchTransformer, LogData, TransformedData } from 'winston-elasticsearch';\n\nconst esTransformer = (logData: LogData): TransformedData => {\n  return ElasticsearchTransformer(logData);\n}\n\nexport const winstonLogger = (elasticsearchNode: string, name: string, level: string): Logger => {\n  const options = {\n    console: {\n      level,\n      handleExceptions: true,\n      json: false,\n      colorize: true\n    },\n    elasticsearch: {\n      level,\n      transformer: esTransformer,\n      clientOpts: {\n        node: elasticsearchNode,\n        log: level,\n        maxRetries: 3,\n        requestTimeout: 15000,\n        sniffOnStart: false\n      }\n    }\n  };\n  const esTransport: ElasticsearchTransport = new ElasticsearchTransport(options.elasticsearch);\n  const logger: Logger = winston.createLogger({\n    exitOnError: false,\n    defaultMeta: {service: name},\n    transports: [\n      new winston.transports.Console(options.console),\n      esTransport\n    ],\n  });\n  return logger;\n}\n"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,qBAAA,GAAAD,OAAA;AAAmH,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEnH,MAAMG,aAAa,GAAIC,OAAgB,IAAsB;EAC3D,OAAO,IAAAC,8CAAwB,EAACD,OAAO,CAAC;AAC1C,CAAC;AAEM,MAAME,aAAa,GAAGA,CAACC,iBAAyB,EAAEC,IAAY,EAAEC,KAAa,KAAa;EAC/F,MAAMC,OAAO,GAAG;IACdC,OAAO,EAAE;MACPF,KAAK;MACLG,gBAAgB,EAAE,IAAI;MACtBC,IAAI,EAAE,KAAK;MACXC,QAAQ,EAAE;IACZ,CAAC;IACDC,aAAa,EAAE;MACbN,KAAK;MACLO,WAAW,EAAEb,aAAa;MAC1Bc,UAAU,EAAE;QACVC,IAAI,EAAEX,iBAAiB;QACvBY,GAAG,EAAEV,KAAK;QACVW,UAAU,EAAE,CAAC;QACbC,cAAc,EAAE,KAAK;QACrBC,YAAY,EAAE;MAChB;IACF;EACF,CAAC;EACD,MAAMC,WAAmC,GAAG,IAAIC,4CAAsB,CAACd,OAAO,CAACK,aAAa,CAAC;EAC7F,MAAMU,MAAc,GAAGC,gBAAO,CAACC,YAAY,CAAC;IAC1CC,WAAW,EAAE,KAAK;IAClBC,WAAW,EAAE;MAACC,OAAO,EAAEtB;IAAI,CAAC;IAC5BuB,UAAU,EAAE,CACV,IAAIL,gBAAO,CAACK,UAAU,CAACC,OAAO,CAACtB,OAAO,CAACC,OAAO,CAAC,EAC/CY,WAAW;EAEf,CAAC,CAAC;EACF,OAAOE,MAAM;AACf,CAAC;AAAAQ,OAAA,CAAA3B,aAAA,GAAAA,aAAA"}